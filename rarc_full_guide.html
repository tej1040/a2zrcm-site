<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RARC ‚Äì Complete Guide</title>

<style>
body {
    background:#eef4ff;
    font-family:Arial;
    padding:40px;
    color:#111;
    margin:0;
}

.page {
    max-width:900px;
    margin:auto;
    position:relative;
}

/* Guide Title */
h1 {
    text-align:center;
    font-size:32px;
    margin-bottom:40px;
}

/* Section Style */
.section {
    background:white;
    padding:25px;
    border-radius:12px;
    box-shadow:0 0 12px rgba(0,0,0,0.05);
    margin-bottom:25px;
    border-left:5px solid #2563eb;
}

.section h2 {
    margin-top:0;
}

/* Lookup Button (Top Right) */
.lookup-btn {
    position:absolute;
    top:0;
    right:0;
    padding:10px 16px;
    background:#2563eb;
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-size:15px;
    font-weight:bold;
}

/* Modal */
.modal {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.8);
    justify-content:center;
    align-items:center;
}

.modal-content {
    background:#1e293b;
    padding:25px;
    width:90%;
    max-width:500px;
    border-radius:12px;
    color:white;
}

.dropdown {
    width:100%;
    padding:12px;
    margin:10px 0;
    border-radius:8px;
    border:none;
    font-size:15px;
    background:#0f172a;
    color:white;
}

#suggestBox {
    position:absolute;
    background:#1e293b;
    width:100%;
    border-radius:8px;
    max-height:150px;
    overflow-y:auto;
    display:none;
    z-index:10;
}

#suggestBox div {
    padding:10px;
    cursor:pointer;
    border-bottom:1px solid #334155;
}

#suggestBox div:hover {
    background:#334155;
}

.definition {
    background:#0f172a;
    padding:15px;
    border-radius:8px;
    margin-top:15px;
}

.close-btn {
    margin-top:20px;
    padding:12px;
    width:100%;
    background:#ef4444;
    border:none;
    color:white;
    border-radius:8px;
    cursor:pointer;
    font-size:15px;
}
</style>
</head>

<body>

<div class="page">

<button class="lookup-btn" onclick="openLookup()">üîç Lookup Codes</button>

<h1>RARC ‚Äì Complete Guide</h1>

<!-- Guide Sections -->
<div class="section">
<h2>What Are Remark Codes (RARC)?</h2>
<p>Remark Codes (RARC) provide additional explanation on a claim outcome. They accompany CARC codes to give clarity behind payer decisions.</p>
</div>

<div class="section">
<h2>Why Do We Use RARC Codes?</h2>
<ul>
<li>Clarify payer reasoning behind denials.</li>
<li>Identify missing documentation or errors.</li>
<li>Know what correction or action is required.</li>
<li>Improve accuracy in AR follow-up.</li>
</ul>
</div>

<div class="section">
<h2>Who Updates RARC Codes?</h2>
<p>X12 maintains and updates RARC codes regularly. Insurance payers adopt the updates to ensure consistent remittance messaging.</p>
</div>

<div class="section">
<h2>How Often Are RARC Codes Updated?</h2>
<p>RARC codes change multiple times yearly. New codes are added, old ones may be removed, and definitions often get updated.</p>
</div>

<div class="section">
<h2>How Do RARC Codes Help AR?</h2>
<ul>
<li>Provide specific correction instructions.</li>
<li>Help AR teams determine next steps.</li>
<li>Reduce repeated payer calls.</li>
<li>Speed up denial resolution.</li>
</ul>
</div>

</div>

<!-- CODE LOOKUP MODAL -->
<div class="modal" id="lookupModal">
    <div class="modal-content">

        <h2>Code Lookup</h2>

        <!-- Step 1: Choose Type -->
        <label>Select Code Type</label>
        <select id="lookupType" class="dropdown">
            <option value="">-- Select --</option>
            <option value="remark">Remark (RARC)</option>
            <option value="denial">Denial (CARC)</option>
        </select>

        <!-- Step 2 for CARC ONLY: Select Group Code -->
        <div id="carcGroupBox" style="display:none;">
            <label>Select Group Code</label>
            <select id="carcGroup" class="dropdown">
                <option value="">-- Choose Group --</option>
                <option value="PR">PR ‚Äì Patient Responsibility</option>
                <option value="CO">CO ‚Äì Contractual Obligation</option>
                <option value="OA">OA ‚Äì Other Adjustment</option>
                <option value="PI">PI ‚Äì Payer Initiated Adjustment</option>
            </select>
        </div>

        <!-- Step 3: Code Input + Suggestions -->
        <div id="codeEntryBox" style="display:none; position:relative;">
            <label>Enter Code</label>
            <input id="codeInput" class="dropdown" placeholder="Example: N130 or 45" autocomplete="off">
            <div id="suggestBox"></div>
        </div>

        <div id="codeResult" class="definition"></div>

        <button class="close-btn" onclick="closeLookup()">Close</button>

    </div>
</div>

<!-- Your Data Files -->
<script src="rarcData.js"></script>
<script src="carcData.js"></script>

<script>
function openLookup(){ document.getElementById("lookupModal").style.display="flex"; }
function closeLookup(){ document.getElementById("lookupModal").style.display="none"; }

document.getElementById("lookupType").addEventListener("change", function () {
    const type = this.value;

    document.getElementById("carcGroupBox").style.display = (type === "denial") ? "block" : "none";
    document.getElementById("codeEntryBox").style.display = (type !== "") ? "block" : "none";
    document.getElementById("codeResult").innerHTML = "";
});

/* ------------------- RARC SEARCH ------------------- */
function searchRARC(code, resultBox) {
    for (let group in rarcData) {
        if (rarcData[group][code]) {
            const info = rarcData[group][code];

            resultBox.innerHTML = `
                <b>${code}</b>: ${info.short}
                <br><br>
                <button id="showFullBtn" style="
                    padding:6px 10px; border:none; border-radius:6px;
                    background:#3b82f6; color:white; cursor:pointer; font-size:13px;">
                    Show full description
                </button>
            `;

            document.getElementById("showFullBtn").onclick = () => {
                resultBox.innerHTML = `<b>${code}</b>: ${info.full}`;
            };

            return true;
        }
    }
    return false;
}
/* ------------------- CARC SEARCH ------------------- */
function searchCARC(group, code, resultBox) {
    if (carcData[group] && carcData[group][code]) {
        const info = carcData[group][code];

        resultBox.innerHTML = `
            <b>${group}${code}</b>: ${info.short}
            <br><br>
            <button id="showFullBtn" style="
                padding:6px 10px; border:none; border-radius:6px;
                background:#3b82f6; color:white; cursor:pointer; font-size:13px;">
                Show full description
            </button>
        `;

        document.getElementById("showFullBtn").onclick = () => {
            resultBox.innerHTML = `<b>${group}${code}</b>: ${info.full}`;
        };

        return true;
    }
    return false;
}

/* ------------------- CODE INPUT EVENT ------------------- */
document.getElementById("codeInput").addEventListener("input", function () {
    const type = document.getElementById("lookupType").value;
    const group = document.getElementById("carcGroup").value;
    const code = this.value.trim().toUpperCase();
    const resultBox = document.getElementById("codeResult");

    if (!code) { resultBox.innerHTML = ""; return; }

    // REMARK
    if (type === "remark") {
        if (!searchRARC(code, resultBox)) {
            resultBox.innerHTML = "No remark code found.";
        }
    }

    // CARC
    if (type === "denial") {
        if (!group) {
            resultBox.innerHTML = "Select a group code first.";
            return;
        }

        if (!searchCARC(group, code, resultBox)) {
            resultBox.innerHTML = "No denial code found.";
        }
    }
});

/* ------------------- AUTOSUGGEST (LIMIT 10 + CLEAN UI) ------------------- */
document.getElementById("codeInput").addEventListener("keyup", function () {
    const type = document.getElementById("lookupType").value;
    const group = document.getElementById("carcGroup").value;
    const keyword = this.value.trim().toUpperCase();
    const suggestBox = document.getElementById("suggestBox");

    suggestBox.innerHTML = "";
    suggestBox.style.display = "none";

    if (!keyword) return;

    let matches = [];

    // RARC lookup
    if (type === "remark") {
    Object.keys(rarcData["RARC"]).forEach(code => {
        if (code.startsWith(keyword)) matches.push(code);
    });
}

    // CARC lookup
    if (type === "denial" && group) {
        Object.keys(carcData[group]).forEach(code => {
            if (code.startsWith(keyword)) matches.push(code);
        });
    }

    if (matches.length === 0) return;

    // Limit to 10 results only
    matches = matches.slice(0, 10);

    suggestBox.style.display = "block";

    matches.forEach(code => {
        const div = document.createElement("div");
        div.textContent = code;

        div.style.padding = "10px";
        div.style.cursor = "pointer";
        div.style.borderBottom = "1px solid #334155";

        div.onclick = () => {
            document.getElementById("codeInput").value = code;
            suggestBox.style.display = "none";
            document.getElementById("codeInput").dispatchEvent(new Event("input"));
        };

        suggestBox.appendChild(div);
    });
});

</script>

</body>
</html>



